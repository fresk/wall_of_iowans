
<IntroScreen>:
    on_touch_down:  app.show_screen('list')
    BoxLayout:
        orientation: 'vertical'
        
        HDImage:
            source: "img/intro-top-bg.png"
        HDImage:
            source: "img/intro-bottom-bg.png"



<GridScreen>:

    BoxLayout:
        orientation: 'vertical'

        GridView:
            items: app.filtered_iowans

        FilterView:
            items: [ {'text': c} for c in app.categories.keys()]





<ListScreen>:

    Button:
        background_normal: "img/btn-switch.png"
        background_down: "img/btn-switch.png"
        size_hint: None, None
        pos: 1920 - 150, 1080 -150
        on_press: app.show_screen('grid')

    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'vertical'
            BoxLayout:
                padding: 330,100
                MapView:
                    selected_iowan: app.selected_iowan
                    items: app.filtered_iowans    
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                H1: 
                    text: app.selected_iowan['title']
                    halign: 'center'
                H2: 
                    text: app.selected_iowan['location'] or "Location Name Missing"
                    halign: 'center'

        
        BoxLayout:
            orientation: 'vertical'

            AnchorLayout:
                anchor_x: 'right'
                size_hint_y: None
                height: 150
                padding: 25



            ScrollListView:
                items: app.filtered_iowans   

        
        
<DetailsScreen>:
    iowan: app.selected_iowan
    photo_tray: photo_tray


    canvas:
        Color: 
            rgba: 1,1,1,root.opacity
        Rectangle:
            pos: 0,1080
            size: 1920,1080
            source: "img/bg-single-top.png"
        Rectangle:
            pos: 0,0
            size: 1920,1080
            source: "img/bg-single-bottom.png"


    BoxLayout:
        orientation: 'vertical'

        #TOP
        BoxLayout:
            orientation: 'horizontal'

            BoxLayout:
                size_hint_x: 0.45
                orientation: 'vertical'
                padding: 50
                WhiteSpace:
                    height: 50
                Image:
                    source: root.top_image
                WhiteSpace:
                    height: 50

            BoxLayout:
                size_hint_x: 0.55
                orientation: 'vertical'
                padding_x: 30
                spacing: 10
                WhiteSpace:
                    height: 80
                H1:
                    text: root.top_title
                H3:
                    text: root.top_subtitle + "\n"+ root.top_category
                WhiteSpace:
                    height: 20
                H3:
                    text: root.top_text
                WhiteSpace:
                    size_hint: 1, 1



        BoxLayout:
            orientation: 'horizontal'

            Widget:
                id: photo_tray

            BoxLayout:
                orientation: 'horizontal'

                WhiteSpace: 
                    width: 50
                    size_hint_y: 1

                RelativeLayout:
                    orientation: 'vertical'

                    BoxLayout:
                        size_hint: 1, None
                        height: 125
                        top: self.parent.top
                        orientation: 'horizontal'
                        WhiteSpace:
                            size_hint_x: 1
                        Button:
                            size_hint: None, None
                            text: 'back'
                            on_press: app.show_screen('list')
                        

                    BoxLayout:
                        orientation: 'vertical'
                        
                        WhiteSpace:
                            height: 125
                        H1:
                            text: root.bottom_title
                            color: 0,0,0,1
                            font_size: 75
                        H2:
                            color: 0,0,0,1
                            text: root.top_subtitle # + "\n"+ root.top_category
                        WhiteSpace:
                            height: 20
                        Text:
                            text: root.bottom_text
                            color: 0,0,0,1
                        WhiteSpace:
                            size_hint: 1, 1


                WhiteSpace: 
                    width: 50
                    size_hint_y: 1

<Photo>:
    size: image.size
    size_hint: None, None

    Image:
        id: image
        source: root.source

        # create initial image to be 400 pixels width
        size: 400, 400 / self.image_ratio

        # add shadow background
        canvas.before:
            Color:
                rgba: 1,1,1,1
            BorderImage:
                source: 'img/shadow32.png'
                border: (36,36,36,36)
                size:(self.width+72, self.height+72)
                pos: (-36,-36)







<FilterView>:
    layout: category_button_container


    Button:
        background_normal: "img/btn-switch.png"
        background_down: "img/btn-switch.png"
        size_hint: None, None
        top: root.height - 50
        right: root.width - 50
        on_press: app.show_screen('list')


    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 50

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 150

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                H1: 
                    text: app.selected_iowan['title']
                H2: 
                    text: app.selected_iowan['location'] or "Location Name Missing"

        BoxLayout:
            orientation: 'horizontal'

            BoxLayout:
                orientation: 'vertical'
                id: category_button_container
                size_hint_x: .3
                padding: 0, 0
                spacing: 50
            WhiteSpace:
                width: 100
            MapView:
                items: app.filtered_iowans 
                size_hint_x: .7
            WhiteSpace:
                width: 50


<CategoryButton>:
    active: toggler.state == 'down'

    ToggleButton:
        id: toggler
        font_size: 50
        halign: 'left'
        text_size: self.width, None
        text: root.text.replace("&amp;", "&")
        on_press: root.on_press()
        padding: 25,0







<GridView>:
    layout: grid_container
    GridLayout:
        id: grid_container
        rows: 4

<GridPhoto>:
    Image:
        allow_stretch: True
        keep_ratio: False
        opacity: 1.0 if root.data['title'] == app.selected_iowan['title'] else 0.6
        source: root.photo_source





<ScrollListView>:
    layout: list_container

    ScrollView:
        GridLayout:
            padding: 0
            id: list_container
            rows: 1
            spacing: 10
            width: self.minimum_width
            size_hint_x: None

<ListPhoto>
    size_hint_x: None
    width: 800
    Image:
        opacity: 1.0 if root.data['title'] == app.selected_iowan['title'] else 0.6
        source: root.photo_source
    Button:
        background_color: 0,0,0,0
        on_press: root.on_press()








<MapView>:
    layout: self

    canvas:
        Color: 
            rgba: 1,1,1,root.opacity
        Rectangle:
            pos: 0,0
            size: self.size
            source: "img/iowa.png"

<MapMarker>:
    size: 75, 75
    size_hint: None, None
    Button:
        size: 75, 75
        size_hint: None, None
        background_normal: 'img/marker.png'
        background_down: 'img/marker.png'
        opacity: 0.6
        on_press: root.on_press()










<HDImage@Image>:
    size_hint: None, None
    size: 1920, 1080
    allow_stretch: True
    


<TextBase@Label>:
    size_hint_y: None
    text_size: self.width, None
    height: self.texture_size[1]
    multiline: True
    markup: True


<WhiteSpace@Widget>
    size_hint: None, None
    size: 10,10



<Text@TextBase>:
    font_size: 30
    color: 1,1,1,1

<H1@Text>
    font_size: 90
    bold: True

<H2@Text>
    font_size: 55

<H3@Text>
    font_size: 40
